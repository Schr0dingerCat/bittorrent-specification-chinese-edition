# 第三篇：元数据文件结构

**元数据文件(Metainfo File)**（即种子文件）是一个 **BEncoding** 编码的数据文件，其整个文件的内容是一个 **BE字典**，包含如下 **BE数据对**。

- **info**: **字典**，描述种子内包含的文件列表信息，这里有两种类型，一是单文件的，二是多文件的，具体看后面的说明。
- **announce**: **字节串**，描述 Tracker 的 URL。
- **announce-list**: **列表**，可选，这是一个对官方规范的扩展项（参考文档：[announce-list扩展字段的申请稿](http://bittorrent.org/beps/bep_0012.html)），提供后向兼容。
- **creation date**: **字节串**，可选，这是一个UNIX时间戳，表示**元数据文件**的创建时间。
- **comment**: **字节串**，可选，自由描述字段，一般描述种子的制作者。
- **created by**: **字节串**，可选，描述用于制作这个**元数据文件**的程序。
- **encoding**: **字节串**，可选，描述 **info.pieces** 字段的编码方式。

## info 字典

无论是**单文件格式**还是**多文件格式**的**元数据文件**，其 **info** 字段下都可以包含下面 3 个字段：

- **piece length**: **整数**，表示一个**分片**的长度（单位：字节）。
- **pieces**: **字节串**，是由多个**分片**的 SHA-1校验码(20字节/个) 拼凑而成的**字节串**，因此其长度总是为20的倍数。
- **private**: **整数**，可选，如果这个值被置为**1**，那么 **BT客户端** ***必须***通过向 **元数据文件** 中指定的 Tracker 汇报自身的存在，从而获取其它 **伙伴** 的信息。反之如果置**0**，**客户端** 可以通过其它方法获取其它**伙伴**，例如 **PEX**，**DHT**。因此，**private** 字段也可以理解为“禁止其它伙伴来源”。

    > 注意：Private Tracker 存在诸多争论。

    > 参考文档：[private 扩展字段的申请稿](http://bittorrent.org/beps/bep_0027.html)。

    > Azureus（BT客户端软件）第一个实现了 **private** 字段。

（未完待续）